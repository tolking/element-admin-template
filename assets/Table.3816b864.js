import{c as S,e as A}from"./modules-element-pro.48cb7110.js";import{a as B,u as I,A as c}from"./crud.f4ba941e.js";import{c as m}from"./index.2226e463.js";import{H as M,a4 as u,ak as N,T as R,u as t,I as U,R as V,S as a,Z as n,X as d,Y as _,i as g}from"./modules-vue.e6816ec1.js";import"./modules-quill.ccd65b61.js";import"./modules-vueuse.d6abf74a.js";import"./modules-element-icon.4fca02db.js";import"./modules-element-plus.47a6d8d7.js";const O=M({__name:"Table",setup(j){const{isFetching:b,page:l,limit:r,total:f,list:v,loadList:F}=B({url:c.user}),{isFetching:C,form:p,submitForm:x}=I({url:c.userStatus,type:"put"}),y=S({label:"\u64CD\u4F5C"}),D=A([{label:"ID",prop:"id"},{label:"\u7528\u6237\u540D",prop:"name"},{label:"\u5934\u50CF",prop:"avatar"},{label:"\u6743\u9650",prop:"role"},{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{label:"\u662F\u5426\u542F\u7528",prop:"status"}]);async function h(s){p.value={id:s.id,status:!s.status},(await x()).value?(m("success","\u4FEE\u6539\u6210\u529F!"),s.status=!s.status):m("warning","\u4FEE\u6539\u5931\u8D25!"),p.value={}}return(s,o)=>{const z=u("el-image"),T=u("el-tag"),k=u("el-button"),w=u("pro-table"),E=u("pro-card"),L=N("loading");return R((U(),V(E,{shadow:"never"},{default:a(()=>[n(w,{"current-page":t(l),"onUpdate:current-page":o[0]||(o[0]=e=>g(l)?l.value=e:null),"page-size":t(r),"onUpdate:page-size":o[1]||(o[1]=e=>g(r)?r.value=e:null),columns:t(D),data:t(v),total:t(f),menu:t(y),border:"",stripe:"",layout:"total, ->, jumper, prev, pager, next, sizes",onLoad:t(F)},{"table-avatar":a(({row:e})=>[n(z,{style:{width:"60px",height:"60px"},src:e.avatar,fit:"scale-down"},null,8,["src"])]),"table-status":a(({row:e,size:i})=>[n(T,{type:e.status?"success":"danger",size:i},{default:a(()=>[d(_(e.status?"\u542F\u7528":"\u7981\u7528"),1)]),_:2},1032,["type","size"])]),menu:a(({row:e,size:i})=>[n(k,{loading:t(C),size:i,text:"",onClick:H=>h(e)},{default:a(()=>[d(_(e.status?"\u7981\u7528":"\u542F\u7528"),1)]),_:2},1032,["loading","size","onClick"])]),_:1},8,["current-page","page-size","columns","data","total","menu","onLoad"])]),_:1})),[[L,t(b)]])}}});export{O as default};
