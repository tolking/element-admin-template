import{r as C,u as h,a as x,b as g,c as E}from"./index.bf23dff5.js";import{d as A,a as D,b as P,P as S}from"./modules-element-pro.ccfdbc19.js";/* empty css             */import{r as v,h as b,u as o,B as V,ap as k,ae as p,w as I,C as R,D as q,S as B,Q as M,i as G,O as N}from"./modules-vue.beb3456d.js";import{p as K,q as L}from"./modules-vueuse.6519d4e6.js";import{G as w,P as O}from"./modules-element-plus.3eb152b1.js";import{A as Q,B as T}from"./modules-element-icon.d6d5f21d.js";import"./modules-quill.4323025a.js";const U={login:"/admin/login"};function j({url:d,transform:r,showTip:n=!0,type:f="post"}){const a=v(!1),t=v({}),s=b(()=>r?r(o(t)):t.value),F=b(()=>C(o(d),s.value.id)),l=h(d,s),i=x(F,s),c=async(e,_)=>{if(_){const m=await u();m.value?n&&g("success","\u63D0\u4EA4\u6210\u529F!"):m.value!==null&&n&&g("warning","\u63D0\u4EA4\u5931\u8D25!")}e()};async function u(e=f){return a.value=!0,e==="post"?(await l.execute(),a.value=!1,l.data):(await i.execute(),a.value=!1,i.data)}return{isFetching:a,form:t,submit:c,submitForm:u}}const z={class:"login"},H=N("h1",{class:"title"}," \u7BA1\u7406\u540E\u53F0 ",-1),ae=V({setup(d){const r=k(),n=E(),{enter:f}=K(),{form:a,submitForm:t}=j({url:U.login}),s=v({}),F=A([{label:"\u7528\u6237",prop:"name",component:p(w),rules:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},props:{clearable:!0,prefixIcon:p(Q),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}},{label:"\u5BC6\u7801",prop:"password",component:p(w),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:5,max:16,message:"\u957F\u5EA6 5 \u5230 16 \u4E2A\u5B57\u7B26",trigger:"blur"}],props:{type:"password",clearable:!0,showPassword:!0,prefixIcon:p(T),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"}}]),l=D({submitText:"\u767B\u5F55",reset:!1}),i=P(async(u,e)=>{await c(e),u()});L("\u767B\u9646\u540E\u53F0"),I(f,async u=>{if(u){const e=await s.value.validate();await c(e)}});async function c(u){if(u){const e=await t();e.value&&(n.value=e.value,r.push("/"))}}return(u,e)=>{const _=S,m=O;return R(),q("div",z,[B(m,{class:"login-content"},{default:M(()=>[H,B(_,{ref_key:"login",ref:s,modelValue:o(a),"onUpdate:modelValue":e[0]||(e[0]=y=>G(a)?a.value=y:null),columns:o(F),menu:o(l),"label-position":"top",onSubmit:o(i)},null,8,["modelValue","columns","menu","onSubmit"])]),_:1})])}}});export{ae as default};
