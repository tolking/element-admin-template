import{c as m,u,aB as p}from"./modules-vue-By89M0U-.js";import{i as d,w as g,x as h}from"./modules-vueuse-Btdjl5qo.js";import{c as b,u as c,r as l}from"./index-Crc8LH7_.js";/* empty css                  */import{ak as v,al as j}from"./modules-element-plus-DH2R2jN-.js";function f(e,t,s={}){return v(Object.assign(s,{type:e,message:t}))}function S(e,t,s={}){return j.confirm(e,t,s)}function w(e){return/\/$/.test(e)?e:e+"/"}function $(e,...t){const[s,...o]=t;if(s!==void 0&&/\{\w*\}/.test(e))e=e.replace(/\{\w*\}/,String(s));else if(s!==void 0)e=w(e)+s;else return e;return $(e,...o)}function y(){d&&window.scrollTo({left:0,top:0,behavior:"smooth"})}let i=!1;const x="https://api.virapi.com/vir_github21e78h6b5d24e",r=g({baseUrl:x,options:{immediate:!1,timeout:b,beforeFetch({options:e,cancel:t}){return i?t():(c(),e.headers=Object.assign(e.headers||{},{"app-token":"$2a$10$oWYgEw/X1hj9BbvejQOud.xFezq5wP8H7NGkVA.4HcChK928Z2nja"}),{options:e})},afterFetch({data:e,response:t}){const s=c(),o=e.code;return o===200?e=e.data||{}:o===401?(s.value={token:"",name:"",avatar:""},!i&&f("warning","登录已经过期"),i=!0,setTimeout(()=>{l.replace(`/login?redirect=${l.currentRoute.value.path}`).then(()=>location.reload())},1500),e=null):o===1e3?(console.error(e.message),f("warning",e.message),e=null):o&&(console.log("出现未全局拦截错误"),e=void 0),{data:e,response:t}},onFetchError({data:e,error:t}){return console.error(t),e=void 0,{data:e,error:t}}},fetchOptions:{mode:"cors",credentials:"same-origin"}});function _(e,t){const s=m(()=>{const o=u(e),n=u(t),a=h(n)?p(n):n||"";return`${o}${a?"?":""}${a}`});return r(s).json()}function A(e,t){return r(e).post(t).json()}function B(e,t){return r(e).put(t).json()}function C(e,t){return r(e).delete(t).json()}const G={login:"/admin/login",user:"/admin/user",userStatus:"/admin/user/{id}/status",article:"/admin/article",goods:"/admin/goods",cates:"/admin/goods/cates",form:"/admin/form"};export{G as A,f as a,S as b,_ as c,y as d,A as e,B as f,$ as r,C as u};
