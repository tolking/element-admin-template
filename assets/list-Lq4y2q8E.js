import"./modules-element-pro-FTTMLDtU.js";import{R,a as b,b as h}from"./index-Crc8LH7_.js";import{c as k,d as w}from"./api-P98th4it.js";import{n as x}from"./modules-element-plus-DH2R2jN-.js";import{r as t,u as m}from"./modules-vue-By89M0U-.js";function j({url:v,transform:i,immediate:p=!0}){const a=t(1),n=t(R),c=t(0),e=t({}),r=t({}),l=t([]),{isFetching:f,data:s,execute:y,...d}=k(v,r),q=async(o,L)=>{L&&(a.value=1,await u()),o()};m(p)&&u();async function u(){f.value||(g(),await y(),s.value&&(w(),l.value=s.value.list,c.value=s.value.total))}function g(){const o=x(i)?i(m(e)):e.value;r.value={...o,[b]:a.value,[h]:n.value}}return{...d,query:e,isFetching:f,page:a,limit:n,total:c,list:l,search:q,loadList:u}}export{j as u};
